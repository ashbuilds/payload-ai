{"version":3,"sources":["../../../src/ui/Floatype/Floatype.tsx"],"sourcesContent":["/**\n * OG Creator: Kailash Nadh\n * Github: https://github.com/knadh/floatype.js\n *\n * Reacted By: Claude 3.5 Sonnet and Ashbuilds\n */\n\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from 'react'\n\nimport styles from './floatype.module.scss'\n\ntype Options = {\n  debounce?: number\n  onNavigate?: (direction: number, items: any[], currentIndex: number) => void\n  onQuery: (query: string) => any[]\n  onRender?: (item: any) => React.ReactNode\n  onSelect?: (item: any, query: string) => string\n  onUpdate: (value: string) => void\n}\n\ntype FloatypeProps = {\n  options: Partial<Options>\n}\n\nexport const Floatype = forwardRef<HTMLTextAreaElement, FloatypeProps>(({ options }, inputRef) => {\n  const [items, setItems] = useState<any[]>([])\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [query, setQuery] = useState<null | string>(null)\n  const [coords, setCoords] = useState<{ x: number; y: number } | null>(null)\n\n  const boxRef = useRef<HTMLDivElement>(null)\n  const shadowRef = useRef<HTMLDivElement>(null)\n\n  const opt: Options = {\n    debounce: 100,\n    onNavigate: undefined,\n    onQuery: () => [],\n    onRender: undefined,\n    onSelect: undefined,\n    onUpdate: () => {},\n    ...options,\n  }\n\n  const destroy = useCallback(() => {\n    setItems([])\n    setCurrentIndex(0)\n    setQuery(null)\n  }, [])\n\n  const getLastWord = useCallback((el: HTMLTextAreaElement): null | string => {\n    const text = el.value.substring(0, el.selectionStart ?? 0)\n    const match = text.match(/\\S+\\s*$/)\n    return match ? match[0] : null\n  }, [])\n\n  const insertWord = useCallback(\n    (el: HTMLInputElement | HTMLTextAreaElement, val: string): void => {\n      const start =\n        Math.max(\n          el.value.lastIndexOf(' ', (el.selectionStart ?? 0) - 1),\n          el.value.lastIndexOf('\\n', (el.selectionStart ?? 0) - 1),\n        ) + 1\n      el.value =\n        el.value.substring(0, start) +\n        val +\n        (el.value[el.selectionStart ?? 0] !== ' ' ? ' ' : '') +\n        el.value.substring(el.selectionStart ?? 0)\n      el.setSelectionRange(start + val.length + 1, start + val.length + 1)\n      opt.onUpdate(el.value)\n    },\n    [opt],\n  )\n\n  const getCaret = useCallback(() => {\n    if (!inputRef || !('current' in inputRef) || !inputRef.current || !shadowRef.current)\n      return null\n\n    const el = inputRef.current\n    const shadow = shadowRef.current\n\n    const txt = el.value.substring(0, el.selectionStart ?? 0)\n    const start = Math.max(txt.lastIndexOf('\\n'), txt.lastIndexOf(' ')) + 1\n\n    const cl = 'floatype-caret'\n    shadow.innerHTML =\n      el.value.substring(0, start) +\n      `<span id=\"${cl}\" style=\"display: inline-block;\">${el.value.substring(start)}</span>`\n\n    const m = shadow.querySelector(`#${cl}`)\n    const elRect = el.getBoundingClientRect()\n    const mRect = m?.getBoundingClientRect()\n\n    if (!mRect) return null\n\n    let top = mRect.top - elRect.top + el.scrollTop\n    let left = mRect.left - elRect.left + el.scrollLeft\n\n    if (boxRef.current && currentIndex !== null) {\n      const box = boxRef.current\n      const selected = box.children[currentIndex] as HTMLElement\n      if (selected) {\n        top -= selected.offsetTop + (selected.clientHeight / 2 - 5)\n      }\n    }\n\n    if (boxRef.current) {\n      const box = boxRef.current\n      if (box.clientWidth + left + elRect.left + 50 > window.innerWidth) {\n        left = left - box.offsetWidth - 50\n      }\n    }\n\n    return {\n      x: left + elRect.left,\n      y: top + elRect.top,\n    }\n  }, [inputRef, shadowRef, boxRef, currentIndex])\n\n  const handleInput = useCallback(() => {\n    if (!inputRef || !('current' in inputRef) || !inputRef.current) return\n    const w = getLastWord(inputRef.current)\n    if (!w) {\n      destroy()\n      return\n    }\n    setQuery(w)\n  }, [inputRef, getLastWord, destroy])\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      if (!boxRef.current) return\n\n      switch (e.key) {\n        case 'ArrowUp':\n          e.preventDefault()\n          setCurrentIndex((prev) => (prev - 1 + items.length) % items.length)\n          break\n        case 'ArrowDown':\n          e.preventDefault()\n          setCurrentIndex((prev) => (prev + 1) % items.length)\n          break\n        case 'Enter':\n          e.preventDefault()\n          if (inputRef && 'current' in inputRef && inputRef.current) {\n            const selectedItem = items[currentIndex]\n            const newVal = opt.onSelect\n              ? opt.onSelect(selectedItem, query)\n              : (selectedItem as unknown as string)\n            insertWord(inputRef.current, newVal)\n          }\n          destroy()\n          break\n        case 'Escape':\n          destroy()\n          break\n      }\n    },\n    [boxRef, items, currentIndex, inputRef, opt.onSelect, insertWord, destroy, query],\n  )\n\n  useEffect(() => {\n    if (!inputRef || !('current' in inputRef) || !inputRef.current) return\n\n    const el = inputRef.current\n    el.addEventListener('input', handleInput)\n    el.addEventListener('keydown', handleKeyDown as any)\n    el.addEventListener('blur', destroy)\n\n    return () => {\n      el.removeEventListener('input', handleInput)\n      el.removeEventListener('keydown', handleKeyDown as any)\n      el.removeEventListener('blur', destroy)\n    }\n  }, [inputRef, handleInput, handleKeyDown])\n\n  useEffect(() => {\n    if (!shadowRef.current || !inputRef || !('current' in inputRef) || !inputRef.current) return\n\n    const shadow = shadowRef.current\n    const el = inputRef.current\n\n    const stylesCss = window.getComputedStyle(el)\n    const { fontFamily, fontSize, fontWeight } = stylesCss\n\n    shadow.style.fontFamily = fontFamily\n    shadow.style.fontSize = fontSize\n    shadow.style.fontWeight = fontWeight\n\n    const updateShadowPosition = () => {\n      const elRect = el.getBoundingClientRect()\n      shadow.style.position = 'fixed'\n      shadow.style.top = `${elRect.top}px`\n      shadow.style.left = `${elRect.left - 52}px`\n      shadow.style.width = `${elRect.width}px`\n      shadow.style.height = `${elRect.height}px`\n      shadow.style.opacity = '0'\n      shadow.style.padding = '0'\n      shadow.style.visibility = 'hidden'\n    }\n\n    setTimeout(updateShadowPosition, 300)\n    window.addEventListener('resize', updateShadowPosition)\n    window.addEventListener('scroll', updateShadowPosition)\n\n    return () => {\n      window.removeEventListener('resize', updateShadowPosition)\n      window.removeEventListener('scroll', updateShadowPosition)\n    }\n  }, [inputRef, shadowRef])\n\n  useEffect(() => {\n    const fetchItems = () => {\n      if (!query) return\n      const newItems = opt.onQuery(query)\n      setItems(newItems)\n      setCoords(getCaret())\n    }\n\n    const timeoutId = setTimeout(fetchItems, opt.debounce)\n    return () => clearTimeout(timeoutId)\n  }, [query, opt.onQuery, opt.debounce, getCaret])\n\n  useEffect(() => {\n    if (opt.onNavigate) {\n      opt.onNavigate(1, items, currentIndex)\n    }\n  }, [currentIndex, items, opt])\n\n  useEffect(() => {\n    if (boxRef.current && coords && inputRef && 'current' in inputRef && inputRef.current) {\n      const box = boxRef.current\n      box.style.position = 'fixed'\n      box.style.left = `${coords.x}px`\n      box.style.top = `${coords.y}px`\n      box.style.width = window.getComputedStyle(inputRef.current).width\n      box.style.display = items.length > 0 ? 'block' : 'none'\n    }\n  }, [coords, items, inputRef])\n\n  return (\n    <div className=\"field-type textarea\" style={{ position: 'relative' }}>\n      <div className=\"textarea-clone\" ref={shadowRef} style={{ position: 'absolute' }} />\n      {items.length > 0 && (\n        <div className={styles.floatype} ref={boxRef}>\n          {items.map((item, idx) => (\n            <div\n              className={`${styles.floatype_item} ${idx === currentIndex ? styles.floatype_sel : ''}`}\n              data-selected={idx === currentIndex}\n              key={idx}\n              onMouseDown={() => {\n                if (inputRef && 'current' in inputRef && inputRef.current) {\n                  const newVal = opt.onSelect\n                    ? opt.onSelect(item, query)\n                    : (item as unknown as string)\n                  insertWord(inputRef.current, newVal)\n                }\n                destroy()\n              }}\n            >\n              {opt.onRender ? opt.onRender(item) : (item as unknown as string)}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n})\n"],"names":["React","forwardRef","useCallback","useEffect","useRef","useState","styles","Floatype","options","inputRef","items","setItems","currentIndex","setCurrentIndex","query","setQuery","coords","setCoords","boxRef","shadowRef","opt","debounce","onNavigate","undefined","onQuery","onRender","onSelect","onUpdate","destroy","getLastWord","el","text","value","substring","selectionStart","match","insertWord","val","start","Math","max","lastIndexOf","setSelectionRange","length","getCaret","current","shadow","txt","cl","innerHTML","m","querySelector","elRect","getBoundingClientRect","mRect","top","scrollTop","left","scrollLeft","box","selected","children","offsetTop","clientHeight","clientWidth","window","innerWidth","offsetWidth","x","y","handleInput","w","handleKeyDown","e","key","preventDefault","prev","selectedItem","newVal","addEventListener","removeEventListener","stylesCss","getComputedStyle","fontFamily","fontSize","fontWeight","style","updateShadowPosition","position","width","height","opacity","padding","visibility","setTimeout","fetchItems","newItems","timeoutId","clearTimeout","display","div","className","ref","floatype","map","item","idx","floatype_item","floatype_sel","data-selected","onMouseDown"],"mappings":"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"}