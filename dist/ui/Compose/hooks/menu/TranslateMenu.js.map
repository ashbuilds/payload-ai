{"version":3,"sources":["../../../../../src/ui/Compose/hooks/menu/TranslateMenu.tsx"],"sourcesContent":["import locales from 'locale-codes'\nimport React, { memo, useState } from 'react'\n\nimport { useInstructions } from '../../../../providers/InstructionsProvider/useInstructions.js'\nimport { Item } from './Item.js'\nimport { Translate } from './items.js'\nimport styles from './menu.module.scss'\n\nexport const TranslateMenu = ({ onClick }: { onClick: (data: { locale: string }) => void }) => {\n  const [show, setShow] = useState(false)\n\n  const { enabledLanguages = [] } = useInstructions()\n\n  let filteredLocales = locales.all.filter((a) => {\n    return a.tag && a.location\n  })\n\n  if (enabledLanguages?.length) {\n    filteredLocales = filteredLocales.filter((a) => enabledLanguages?.includes(a.tag))\n  }\n\n  const [languages, setLanguages] = useState(filteredLocales)\n  const [inputFocus, setInputFocus] = useState(false)\n\n  return (\n    <div\n      className={styles.menu}\n      onMouseLeave={() => {\n        if (!inputFocus) {\n          setShow(false)\n        }\n      }}\n    >\n      <Translate\n        isActive={show}\n        isMenu\n        onClick={() => {\n          setShow(!show)\n        }}\n        onMouseEnter={() => setShow(true)}\n      />\n      <div className={styles.hoverMenu} data-show={show}>\n        <div\n          className={`${styles.menu} ${styles.subMenu}`}\n          style={{\n            background: 'var(--popup-bg)',\n            // minHeight: '300px',\n          }}\n        >\n          <Item\n            onClick={() => {}}\n            style={{\n              background: 'transparent',\n              padding: '0 0 5px 0',\n              position: 'sticky',\n              top: 0,\n            }}\n          >\n            <input\n              className={styles.menuInput}\n              onBlur={() => setInputFocus(false)}\n              onChange={(event) => {\n                const value = event.target.value\n                setLanguages(\n                  filteredLocales.filter((l) => {\n                    const lowerCaseValue = value.toLowerCase()\n                    return (\n                      l.name.toLowerCase().startsWith(lowerCaseValue) ||\n                      (l.location && l.location.toLowerCase().startsWith(lowerCaseValue)) ||\n                      l.tag.toLowerCase().startsWith(lowerCaseValue)\n                    )\n                  }),\n                )\n              }}\n              onFocus={() => setInputFocus(true)}\n              placeholder=\"Search...\"\n            />\n          </Item>\n          {languages.map((locale) => {\n            return (\n              <Item\n                key={locale.tag}\n                onClick={() => {\n                  onClick({ locale: locale.tag })\n                }}\n              >\n                <span className={styles.ellipsis}>{`${locale.location} (${locale.tag})`}</span>\n              </Item>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport const MemoizedTranslateMenu = memo(TranslateMenu)\n"],"names":["locales","React","memo","useState","useInstructions","Item","Translate","styles","TranslateMenu","onClick","show","setShow","enabledLanguages","filteredLocales","all","filter","a","tag","location","length","includes","languages","setLanguages","inputFocus","setInputFocus","div","className","menu","onMouseLeave","isActive","isMenu","onMouseEnter","hoverMenu","data-show","subMenu","style","background","padding","position","top","input","menuInput","onBlur","onChange","event","value","target","l","lowerCaseValue","toLowerCase","name","startsWith","onFocus","placeholder","map","locale","span","ellipsis","MemoizedTranslateMenu"],"mappings":";AAAA,OAAOA,aAAa,eAAc;AAClC,OAAOC,SAASC,IAAI,EAAEC,QAAQ,QAAQ,QAAO;AAE7C,SAASC,eAAe,QAAQ,gEAA+D;AAC/F,SAASC,IAAI,QAAQ,YAAW;AAChC,SAASC,SAAS,QAAQ,aAAY;AACtC,OAAOC,YAAY,qBAAoB;AAEvC,OAAO,MAAMC,gBAAgB,CAAC,EAAEC,OAAO,EAAmD;IACxF,MAAM,CAACC,MAAMC,QAAQ,GAAGR,SAAS;IAEjC,MAAM,EAAES,mBAAmB,EAAE,EAAE,GAAGR;IAElC,IAAIS,kBAAkBb,QAAQc,GAAG,CAACC,MAAM,CAAC,CAACC;QACxC,OAAOA,EAAEC,GAAG,IAAID,EAAEE,QAAQ;IAC5B;IAEA,IAAIN,kBAAkBO,QAAQ;QAC5BN,kBAAkBA,gBAAgBE,MAAM,CAAC,CAACC,IAAMJ,kBAAkBQ,SAASJ,EAAEC,GAAG;IAClF;IAEA,MAAM,CAACI,WAAWC,aAAa,GAAGnB,SAASU;IAC3C,MAAM,CAACU,YAAYC,cAAc,GAAGrB,SAAS;IAE7C,qBACE,MAACsB;QACCC,WAAWnB,OAAOoB,IAAI;QACtBC,cAAc;YACZ,IAAI,CAACL,YAAY;gBACfZ,QAAQ;YACV;QACF;;0BAEA,KAACL;gBACCuB,UAAUnB;gBACVoB,MAAM;gBACNrB,SAAS;oBACPE,QAAQ,CAACD;gBACX;gBACAqB,cAAc,IAAMpB,QAAQ;;0BAE9B,KAACc;gBAAIC,WAAWnB,OAAOyB,SAAS;gBAAEC,aAAWvB;0BAC3C,cAAA,MAACe;oBACCC,WAAW,GAAGnB,OAAOoB,IAAI,CAAC,CAAC,EAAEpB,OAAO2B,OAAO,EAAE;oBAC7CC,OAAO;wBACLC,YAAY;oBAEd;;sCAEA,KAAC/B;4BACCI,SAAS,KAAO;4BAChB0B,OAAO;gCACLC,YAAY;gCACZC,SAAS;gCACTC,UAAU;gCACVC,KAAK;4BACP;sCAEA,cAAA,KAACC;gCACCd,WAAWnB,OAAOkC,SAAS;gCAC3BC,QAAQ,IAAMlB,cAAc;gCAC5BmB,UAAU,CAACC;oCACT,MAAMC,QAAQD,MAAME,MAAM,CAACD,KAAK;oCAChCvB,aACET,gBAAgBE,MAAM,CAAC,CAACgC;wCACtB,MAAMC,iBAAiBH,MAAMI,WAAW;wCACxC,OACEF,EAAEG,IAAI,CAACD,WAAW,GAAGE,UAAU,CAACH,mBAC/BD,EAAE7B,QAAQ,IAAI6B,EAAE7B,QAAQ,CAAC+B,WAAW,GAAGE,UAAU,CAACH,mBACnDD,EAAE9B,GAAG,CAACgC,WAAW,GAAGE,UAAU,CAACH;oCAEnC;gCAEJ;gCACAI,SAAS,IAAM5B,cAAc;gCAC7B6B,aAAY;;;wBAGfhC,UAAUiC,GAAG,CAAC,CAACC;4BACd,qBACE,KAAClD;gCAECI,SAAS;oCACPA,QAAQ;wCAAE8C,QAAQA,OAAOtC,GAAG;oCAAC;gCAC/B;0CAEA,cAAA,KAACuC;oCAAK9B,WAAWnB,OAAOkD,QAAQ;8CAAG,GAAGF,OAAOrC,QAAQ,CAAC,EAAE,EAAEqC,OAAOtC,GAAG,CAAC,CAAC,CAAC;;+BALlEsC,OAAOtC,GAAG;wBAQrB;;;;;;AAKV,EAAC;AAED,OAAO,MAAMyC,sCAAwBxD,KAAKM,eAAc"}