{"version":3,"sources":["../../../src/fields/SelectField/SelectField.tsx"],"sourcesContent":["'use client'\n\nimport type { SelectFieldProps } from '@payloadcms/ui'\nimport type { Option } from 'payload'\n\nimport { SelectField as Select, useField, useFieldProps } from '@payloadcms/ui'\nimport React, { useEffect, useState } from 'react'\n\nexport const SelectField = (props: SelectFieldProps) => {\n  const fieldProps = useFieldProps()\n\n  const { custom: selectOptions, path } = fieldProps\n  const { options: optionsFromProps = [] } = props\n  const { filterByField, options } = selectOptions\n\n  const { value } = useField({\n    path: filterByField,\n  })\n  const [filterOptions, setFilterOptions] = useState<Option[]>([])\n\n  //TODO: Remove this mess, find alternative\n  useEffect(() => {\n    if (Array.isArray(options)) {\n      const opts = options.filter((option) => {\n        if (!value || !option.fields) return true\n\n        if (Array.isArray(option.fields)) {\n          return option.fields.includes(value)\n        }\n      })\n      setFilterOptions(opts)\n    } else {\n      setFilterOptions(optionsFromProps)\n    }\n  }, [value, optionsFromProps, options])\n\n  return <Select {...props} options={filterOptions} />\n}\n"],"names":["SelectField","Select","useField","useFieldProps","React","useEffect","useState","props","fieldProps","custom","selectOptions","path","options","optionsFromProps","filterByField","value","filterOptions","setFilterOptions","Array","isArray","opts","filter","option","fields","includes"],"mappings":"AAAA;;AAKA,SAASA,eAAeC,MAAM,EAAEC,QAAQ,EAAEC,aAAa,QAAQ,iBAAgB;AAC/E,OAAOC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAElD,OAAO,MAAMN,cAAc,CAACO;IAC1B,MAAMC,aAAaL;IAEnB,MAAM,EAAEM,QAAQC,aAAa,EAAEC,IAAI,EAAE,GAAGH;IACxC,MAAM,EAAEI,SAASC,mBAAmB,EAAE,EAAE,GAAGN;IAC3C,MAAM,EAAEO,aAAa,EAAEF,OAAO,EAAE,GAAGF;IAEnC,MAAM,EAAEK,KAAK,EAAE,GAAGb,SAAS;QACzBS,MAAMG;IACR;IACA,MAAM,CAACE,eAAeC,iBAAiB,GAAGX,SAAmB,EAAE;IAE/D,0CAA0C;IAC1CD,UAAU;QACR,IAAIa,MAAMC,OAAO,CAACP,UAAU;YAC1B,MAAMQ,OAAOR,QAAQS,MAAM,CAAC,CAACC;gBAC3B,IAAI,CAACP,SAAS,CAACO,OAAOC,MAAM,EAAE,OAAO;gBAErC,IAAIL,MAAMC,OAAO,CAACG,OAAOC,MAAM,GAAG;oBAChC,OAAOD,OAAOC,MAAM,CAACC,QAAQ,CAACT;gBAChC;YACF;YACAE,iBAAiBG;QACnB,OAAO;YACLH,iBAAiBJ;QACnB;IACF,GAAG;QAACE;QAAOF;QAAkBD;KAAQ;IAErC,qBAAO,KAACX;QAAQ,GAAGM,KAAK;QAAEK,SAASI;;AACrC,EAAC"}