{"version":3,"sources":["../../../../src/ai/models/anthropic/generateRichText.ts"],"sourcesContent":["import { anthropic } from '@ai-sdk/anthropic'\nimport { streamText } from 'ai'\n\nimport {extractPromptAttachments} from \"../../../utilities/extractPromptAttachments.js\";\n\nexport const generateRichText = (text: string, options: any) => {\n  const streamResult = streamText({\n    model: anthropic(options.model),\n    onError: (error) => {\n      console.error(`generateRichText: `, error)\n    },\n    prompt: options.extractAttachments ? extractPromptAttachments(text) : text,\n    system: `${options.system}\n\nRULES:\n- Generate original and unique content based on the given topic.\n- Strictly adhere to the specified layout and formatting instructions.\n- Use Markdown formatting for rich text elements (headings, bold, italic, lists, links, etc.).\n- Output ONLY the content in Markdown format, no JSON or other wrappers.\n- Do not include markdown code fences (\\`\\`\\`markdown) in your output.\n---\nLAYOUT INSTRUCTIONS:\n${options.layout}\n\n---\nMARKDOWN FORMATTING GUIDELINES:\n- Use # for h1, ## for h2, ### for h3 headings\n- Use **bold** for emphasis and *italic* for secondary emphasis\n- Use - or * for unordered lists, 1. 2. 3. for ordered lists\n- Use [text](url) for links\n- Use > for blockquotes\n- Use \\`code\\` for inline code and \\`\\`\\` for code blocks\n- Ensure coherence and logical flow between all sections.\n- Maintain a consistent tone and style throughout the content.\n- Use clear and concise language appropriate for the target audience.\n`,\n    temperature: options.temperature || 0.7,\n  })\n\n  return streamResult.toTextStreamResponse()\n}\n"],"names":["anthropic","streamText","extractPromptAttachments","generateRichText","text","options","streamResult","model","onError","error","console","prompt","extractAttachments","system","layout","temperature","toTextStreamResponse"],"mappings":"AAAA,SAASA,SAAS,QAAQ,oBAAmB;AAC7C,SAASC,UAAU,QAAQ,KAAI;AAE/B,SAAQC,wBAAwB,QAAO,iDAAiD;AAExF,OAAO,MAAMC,mBAAmB,CAACC,MAAcC;IAC7C,MAAMC,eAAeL,WAAW;QAC9BM,OAAOP,UAAUK,QAAQE,KAAK;QAC9BC,SAAS,CAACC;YACRC,QAAQD,KAAK,CAAC,CAAC,kBAAkB,CAAC,EAAEA;QACtC;QACAE,QAAQN,QAAQO,kBAAkB,GAAGV,yBAAyBE,QAAQA;QACtES,QAAQ,GAAGR,QAAQQ,MAAM,CAAC;;;;;;;;;;AAU9B,EAAER,QAAQS,MAAM,CAAC;;;;;;;;;;;;;AAajB,CAAC;QACGC,aAAaV,QAAQU,WAAW,IAAI;IACtC;IAEA,OAAOT,aAAaU,oBAAoB;AAC1C,EAAC"}