{"version":3,"sources":["../../../../src/ai/models/openai/generateRichText.ts"],"sourcesContent":["import { streamText } from 'ai'\n\nimport {extractPromptAttachments} from \"../../../utilities/extractPromptAttachments.js\";\nimport { openai } from './openai.js'\n\n\nexport const generateRichText = (text: string, options: any = {}) => {\n  console.log(\"options.layout \", options.layout)\n  const streamResult = streamText({\n    model: openai(options.model),\n    onError: (error) => {\n      console.error(`generateRichText: `, error)\n    },\n    prompt: options.extractAttachments ? extractPromptAttachments(text) : text,\n    system: `${options.system}\n\nRULES:\n- Generate original and unique content based on the given topic.\n- Strictly adhere to the specified layout and formatting instructions.\n- Use Markdown formatting for rich text elements (headings, bold, italic, lists, links, etc.).\n- Output ONLY the content in Markdown format, no JSON or other wrappers.\n- Do not include markdown code fences (\\`\\`\\`markdown) in your output.\n---\nLAYOUT INSTRUCTIONS:\n${options.layout}\n\n---\nMARKDOWN FORMATTING GUIDELINES:\n- Use # for h1, ## for h2, ### for h3 headings\n- Use **bold** for emphasis and *italic* for secondary emphasis\n- Use - or * for unordered lists, 1. 2. 3. for ordered lists\n- Use [text](url) for links\n- Use > for blockquotes\n- Use \\`code\\` for inline code and \\`\\`\\` for code blocks\n- Ensure coherence and logical flow between all sections.\n- Maintain a consistent tone and style throughout the content.\n- Use clear and concise language appropriate for the target audience.\n`,\n    temperature: options.temperature || 0.7,\n  })\n  return streamResult.toTextStreamResponse()\n}\n"],"names":["streamText","extractPromptAttachments","openai","generateRichText","text","options","console","log","layout","streamResult","model","onError","error","prompt","extractAttachments","system","temperature","toTextStreamResponse"],"mappings":"AAAA,SAASA,UAAU,QAAQ,KAAI;AAE/B,SAAQC,wBAAwB,QAAO,iDAAiD;AACxF,SAASC,MAAM,QAAQ,cAAa;AAGpC,OAAO,MAAMC,mBAAmB,CAACC,MAAcC,UAAe,CAAC,CAAC;IAC9DC,QAAQC,GAAG,CAAC,mBAAmBF,QAAQG,MAAM;IAC7C,MAAMC,eAAeT,WAAW;QAC9BU,OAAOR,OAAOG,QAAQK,KAAK;QAC3BC,SAAS,CAACC;YACRN,QAAQM,KAAK,CAAC,CAAC,kBAAkB,CAAC,EAAEA;QACtC;QACAC,QAAQR,QAAQS,kBAAkB,GAAGb,yBAAyBG,QAAQA;QACtEW,QAAQ,GAAGV,QAAQU,MAAM,CAAC;;;;;;;;;;AAU9B,EAAEV,QAAQG,MAAM,CAAC;;;;;;;;;;;;;AAajB,CAAC;QACGQ,aAAaX,QAAQW,WAAW,IAAI;IACtC;IACA,OAAOP,aAAaQ,oBAAoB;AAC1C,EAAC"}