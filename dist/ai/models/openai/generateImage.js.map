{"version":3,"sources":["../../../../src/ai/models/openai/generateImage.ts"],"sourcesContent":["import type { ImageGenerateParams } from 'openai/resources/images'\n\nimport OpenAI from 'openai'\n\nexport const generateImage = async (\n  prompt: string,\n  {\n    size = '1024x1024',\n    style = 'natural',\n    version = 'dall-e-3',\n  }: {\n    size?: ImageGenerateParams['size']\n    style?: ImageGenerateParams['style']\n    version?: ImageGenerateParams['model']\n  } = {},\n) => {\n  const openaiAPI = new OpenAI()\n  console.log('generateImage: ', size, style, version, prompt)\n  const response = await openaiAPI.images.generate({\n    model: version,\n    n: 1,\n    prompt,\n    response_format: 'b64_json',\n    size,\n    style,\n  })\n\n  const { b64_json, revised_prompt } = response.data[0] || {}\n  return {\n    alt: revised_prompt,\n    buffer: Buffer.from(b64_json, 'base64'),\n  }\n}\n"],"names":["OpenAI","generateImage","prompt","size","style","version","openaiAPI","console","log","response","images","generate","model","n","response_format","b64_json","revised_prompt","data","alt","buffer","Buffer","from"],"mappings":"AAEA,OAAOA,YAAY,SAAQ;AAE3B,OAAO,MAAMC,gBAAgB,OAC3BC,QACA,EACEC,OAAO,WAAW,EAClBC,QAAQ,SAAS,EACjBC,UAAU,UAAU,EAKrB,GAAG,CAAC,CAAC;IAEN,MAAMC,YAAY,IAAIN;IACtBO,QAAQC,GAAG,CAAC,mBAAmBL,MAAMC,OAAOC,SAASH;IACrD,MAAMO,WAAW,MAAMH,UAAUI,MAAM,CAACC,QAAQ,CAAC;QAC/CC,OAAOP;QACPQ,GAAG;QACHX;QACAY,iBAAiB;QACjBX;QACAC;IACF;IAEA,MAAM,EAAEW,QAAQ,EAAEC,cAAc,EAAE,GAAGP,SAASQ,IAAI,CAAC,EAAE,IAAI,CAAC;IAC1D,OAAO;QACLC,KAAKF;QACLG,QAAQC,OAAOC,IAAI,CAACN,UAAU;IAChC;AACF,EAAC"}